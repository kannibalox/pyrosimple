
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://kannibalox.github.io/pyrosimple/advanced/">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.2.7">
    
    
      
        <title>Advanced Features - pyrosimple</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.046329b4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300i,400,400i,700,700i%7CInconsolata:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Lato";--md-code-font:"Inconsolata"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#advanced-rtcontrol" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="pyrosimple" class="md-header__button md-logo" aria-label="pyrosimple" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M375.7 19.7c-1.5-8-6.9-14.7-14.4-17.8s-16.1-2.2-22.8 2.4L256 61.1 173.5 4.2c-6.7-4.6-15.3-5.5-22.8-2.4s-12.9 9.8-14.4 17.8l-18.1 98.5-98.5 18.2c-8 1.5-14.7 6.9-17.8 14.4s-2.2 16.1 2.4 22.8L61.1 256 4.2 338.5c-4.6 6.7-5.5 15.3-2.4 22.8s9.8 13 17.8 14.4l98.5 18.1 18.1 98.5c1.5 8 6.9 14.7 14.4 17.8s16.1 2.2 22.8-2.4l82.6-56.8 82.5 56.9c6.7 4.6 15.3 5.5 22.8 2.4s12.9-9.8 14.4-17.8l18.1-98.5 98.5-18.1c8-1.5 14.7-6.9 17.8-14.4s2.2-16.1-2.4-22.8L450.9 256l56.9-82.5c4.6-6.7 5.5-15.3 2.4-22.8s-9.8-12.9-17.8-14.4l-98.5-18.1-18.2-98.5zM269.6 110l65.6-45.2 14.4 78.3c1.8 9.8 9.5 17.5 19.3 19.3l78.3 14.4-45.2 65.6c-5.7 8.2-5.7 19 0 27.2l45.2 65.6-78.3 14.4c-9.8 1.8-17.5 9.5-19.3 19.3l-14.4 78.3-65.6-45.2c-8.2-5.7-19-5.7-27.2 0l-65.6 45.2-14.4-78.3c-1.8-9.8-9.5-17.5-19.3-19.3l-78.3-14.4 45.2-65.6c5.7-8.2 5.7-19 0-27.2l-45.2-65.6 78.3-14.4c9.8-1.8 17.5-9.5 19.3-19.3l14.4-78.3 65.6 45.2c8.2 5.7 19 5.7 27.2 0zM256 368a112 112 0 1 0 0-224 112 112 0 1 0 0 224zm-64-112a64 64 0 1 1 128 0 64 64 0 1 1-128 0z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            pyrosimple
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Advanced Features
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_3" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_3">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/kannibalox/pyrosimple" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../quickstart/" class="md-tabs__link">
        
  
    
  
  Quick Start

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../usage-rtxmlrpc/" class="md-tabs__link">
          
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../changing-announce/" class="md-tabs__link">
          
  
  How-tos

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../configuration/" class="md-tabs__link">
          
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../rtorrent-config/" class="md-tabs__link">
          
  
  Advanced

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="pyrosimple" class="md-nav__button md-logo" aria-label="pyrosimple" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M375.7 19.7c-1.5-8-6.9-14.7-14.4-17.8s-16.1-2.2-22.8 2.4L256 61.1 173.5 4.2c-6.7-4.6-15.3-5.5-22.8-2.4s-12.9 9.8-14.4 17.8l-18.1 98.5-98.5 18.2c-8 1.5-14.7 6.9-17.8 14.4s-2.2 16.1 2.4 22.8L61.1 256 4.2 338.5c-4.6 6.7-5.5 15.3-2.4 22.8s9.8 13 17.8 14.4l98.5 18.1 18.1 98.5c1.5 8 6.9 14.7 14.4 17.8s16.1 2.2 22.8-2.4l82.6-56.8 82.5 56.9c6.7 4.6 15.3 5.5 22.8 2.4s12.9-9.8 14.4-17.8l18.1-98.5 98.5-18.1c8-1.5 14.7-6.9 17.8-14.4s2.2-16.1-2.4-22.8L450.9 256l56.9-82.5c4.6-6.7 5.5-15.3 2.4-22.8s-9.8-12.9-17.8-14.4l-98.5-18.1-18.2-98.5zM269.6 110l65.6-45.2 14.4 78.3c1.8 9.8 9.5 17.5 19.3 19.3l78.3 14.4-45.2 65.6c-5.7 8.2-5.7 19 0 27.2l45.2 65.6-78.3 14.4c-9.8 1.8-17.5 9.5-19.3 19.3l-14.4 78.3-65.6-45.2c-8.2-5.7-19-5.7-27.2 0l-65.6 45.2-14.4-78.3c-1.8-9.8-9.5-17.5-19.3-19.3l-78.3-14.4 45.2-65.6c5.7-8.2 5.7-19 0-27.2l-45.2-65.6 78.3-14.4c9.8-1.8 17.5-9.5 19.3-19.3l14.4-78.3 65.6 45.2c8.2 5.7 19 5.7 27.2 0zM256 368a112 112 0 1 0 0-224 112 112 0 1 0 0 224zm-64-112a64 64 0 1 1 128 0 64 64 0 1 1-128 0z"/></svg>

    </a>
    pyrosimple
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/kannibalox/pyrosimple" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../usage-rtxmlrpc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rtxmlrpc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../usage-rtcontrol/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rtcontrol
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../usage-pyrotorque/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pyrotorque
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../usage-tor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mktor/lstor/chtor
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How-tos
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            How-tos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../changing-announce/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changing announce URLs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../conky/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrate with Conky
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../maintenance-tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General maintenance tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../pyrotorque-tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pyrotorque tutorial
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../pyrotorque-jobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Torque Jobs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Advanced
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../rtorrent-config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rTorrent Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../experimental/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Experimental Features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tips & Tricks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../migrate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migrating from pyrocore
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../custom-code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Code
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Using these features requires some knowledge in the area of Linux,
Bash, and Python, but they enable you to customize your setup even
further and handle very specific use-cases.</p>
</div>
<h1 id="advanced-rtcontrol">Advanced 'rtcontrol'</h1>
<h2 id="executing-os-commands">Executing OS commands</h2>
<p>The <code>--call</code> and <code>--spawn</code> options can be used to call an OS level
command and feed it with data from the selected items. The argument to
both options is a template, i.e. you can have things like
<code>{{d.hash}}</code> in them.</p>
<p>When using <code>--call</code>, the command is passed to the shell for parsing --
with obvious implications regarding the quoting of arguments, thus
<code>--call</code> only makes sense if you need I/O redirection or similar shell
features.</p>
<p>In contrast, the <code>--spawn</code> option splits its argument list according to
shell rules <em>before</em> expanding the template placeholders, and then calls
the resulting sequence of command name and arguments directly. Consider
<code>--spawn 'echo "name: {{d.name}}"'</code> vs.
<code>--spawn 'echo name: {{d.name}}'</code> -- the first form passes one
argument to <code>/bin/echo</code>, the second form two arguments. Note that in
both cases, spaces or shell meta characters contained in the item name
are of no relevance, since the argument list is split according to the
template, <em>not</em> its expanded value.</p>
<p>To list all the fields available in the first five items, try this
command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>rtcontrol<span class="w"> </span>//<span class="w"> </span>-/5<span class="w"> </span>--spawn<span class="w"> </span><span class="s2">&quot;echo -e &#39;\\n&#39;{{i}}&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span>-re<span class="w"> </span><span class="s1">&#39;s/, /,\n    /g&#39;</span>
</code></pre></div>
<p>Unlike <code>--call</code>, where you can use shell syntax to call several
commands, <code>--spawn</code> can be passed several times for executing a sequence
of commands. If any called command fails, the <code>rtcontrol</code> call is
aborted with an error.</p>
<h3 id="copy-session-metafiles-by-category">Copy Session Metafiles by Category</h3>
<p>Here's a practical example for using <code>--spawn</code>, it copies all your
loaded metafiles from the session directory into a folder structure
categorized by the <em>ruTorrent</em> label. Unlabelled items go to the
<code>_NOLABEL</code> folder.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nv">target</span><span class="o">=</span><span class="s2">&quot;/tmp/metafiles&quot;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>rm<span class="w"> </span>-rf<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$target</span><span class="s2">&quot;</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>rtcontrol<span class="w"> </span>//<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span>--spawn<span class="w"> </span><span class="s1">&#39;mkdir -p &quot;&#39;</span><span class="s2">&quot;</span><span class="nv">$target</span><span class="s2">/&quot;</span><span class="s1">&#39;&quot;&#39;</span><span class="o">{{</span>d.label<span class="w"> </span>or<span class="w"> </span><span class="s2">&quot;_NOLABEL&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>shell<span class="o">}}</span><span class="s1">&#39; \</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="s1">  --spawn &#39;</span>cp<span class="w"> </span><span class="o">{{</span>d.sessionfile<span class="o">}}</span><span class="w"> </span><span class="s2">&quot;&#39;&quot;</span><span class="nv">$target</span><span class="s2">&quot;&#39;&quot;</span>/<span class="o">{{</span>d.label<span class="w"> </span>or<span class="w"> </span><span class="s2">&quot;_NOLABEL&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>shell<span class="o">}}</span>/<span class="o">{{</span>d.name<span class="p">|</span>shell<span class="o">}}</span>-<span class="o">{{</span>d.hash<span class="o">[</span>:7<span class="o">]}}</span>.torrent<span class="err">&#39;</span>
</code></pre></div>
<p>The copied metafiles themselves are renamed to the contained name of the
item's data, plus a small part of the infohash to make these names
unique.</p>
<p>Replace the <code>d.label</code> by <code>d.‹fieldname›</code> to categorize by other
values, e.g. <code>d.alias</code> for 'by tracker'.</p>
<h2 id="executing-xmlrpc-commands-rtcontrol-exec">Executing XMLRPC commands {#rtcontrol-exec}</h2>
<p>If you want to apply some custom XMLRPC commands against a set of
download items, the <code>--exec</code> option of <code>rtcontrol</code> allows you to do
that. For global commands not referring to specific items, see the next
section about the <code>rtxmlrpc</code> tool. Read through the following examples
to understand how <code>--exec</code> works, features are explained as they are
used there. Also make sure you understand basic things like
<code>output-templates</code>{.interpreted-text role="ref"} beforehand, it's
assumed here that you do.</p>
<h3 id="repairing-stuck-items">Repairing Stuck Items</h3>
<p>Let's start with an easy example of using <code>--exec</code>, where no templating
is needed:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>rtcontrol<span class="w"> </span>--exec<span class="w"> </span><span class="s1">&#39;d.stop= ; d.close= ; f.multicall=,f.set_create_queued=0,f.set_resize_queued=0 ; d.check_hash=&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">          </span>--from<span class="w"> </span>stopped<span class="w"> </span>//<span class="w"> </span>-/1
</code></pre></div>
<p>This command simulates pressing <code>^K^E^R</code> in the curses UI (which cleans
the state of stuck / damaged items), and as written above only affects
the first stopped item.</p>
<p>Use different filter arguments after <code>--exec</code> to select other items.
Afterwards, use <code>--start</code> to start these items again.</p>
<h3 id="manually-triggering-events">Manually Triggering Events</h3>
<p>Since rTorrent events are merely multi-call commands, you can trigger
them manually by calling them on selected items. This calls
<code>event.download.finished</code> (again) on complete items loaded
in the last 10 minutes:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>rtcontrol<span class="w"> </span>--exec<span class="w"> </span><span class="s2">&quot;event.download.finished=&quot;</span><span class="w"> </span><span class="s1">&#39;loaded&lt;10m&#39;</span><span class="w"> </span><span class="nv">is_complete</span><span class="o">=</span>y
</code></pre></div>
<p>Make sure that the registered handlers do not have adverse effects when
called repeatedly, i.e. know what you're doing. The handlers for an
event can be listed like so:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>rtxmlrpc<span class="w"> </span>--output-format<span class="w"> </span>repr<span class="w"> </span>method.get<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>event.download.finished
</code></pre></div>
<h3 id="relocating-download-data">Relocating Download Data</h3>
<p>The most simple variant of changing the download path is setting a new
fixed location for all selected items, as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>rtcontrol<span class="w"> </span>--exec<span class="w"> </span><span class="s1">&#39;d.directory_base.set=&quot;/mnt/data/new/path&quot;&#39;</span><span class="w"> </span><span class="nv">directory</span><span class="o">=</span>/mnt/data/old/path
</code></pre></div>
<p>This replaces the location of items stored at <code>/mnt/data/old/path</code> with
a new path. But to be really useful, we'd want to shift <em>any</em> path
under a given base directory to a new location -- the next command does
this by using templating and calculating the new path based on the old
one:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>rtcontrol<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span>--exec<span class="w"> </span><span class="s1">&#39;d.directory_base.set=&quot;{{item.directory|subst(&quot;^/mnt/data/&quot;,&quot;/var/data/&quot;)}}&quot; ; &gt;d.directory=&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="nv">path</span><span class="o">=</span>/mnt/data/<span class="se">\*</span>
</code></pre></div>
<p>This selects any item stored under <code>/mnt/data</code> and relocates it to the
new base directory <code>/var/data</code>. Fields of an item can be used via a
<code>item.‹field-name›</code> reference. Adding <code>&gt;d.directory=</code> prints the new
location to the console -- a semicolon with spaces on both sides
delimits several commands, and the <code>&gt;</code> prints the result of a XMLRPC
command.</p>
<p>The <code>move-data</code>{.interpreted-text role="ref"} section has more on how to
also move the data on disk, in addition to changing the location in
rTorrent's session as shown here.</p>
<h3 id="making-shared-data-paths-unique">Making Shared Data Paths Unique</h3>
<p>Another example regarding data paths is this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>rtcontrol<span class="w"> </span>--from<span class="w"> </span>stopped<span class="w"> </span>//<span class="w"> </span>--exec<span class="w"> </span><span class="s1">&#39;directory.set={{item.directory}}-{{item.hash}}&#39;</span>
</code></pre></div>
<p>That command ensures that items that would download into the same path
get a unique name by appending the info hash, and assumes those items
weren't started yet (i.e. added via <code>load.normal</code>).</p>
<h3 id="changing-announce-urls-in-bulk">Changing Announce URLs in Bulk</h3>
<p>The next example replaces an active announce URL with a new one, which
is necessary after a domain or passkey change. Compared to other methods
like using <code>sed</code> on the files in your session directory, this does not
require a client restart, and is also safer (the <code>sed</code> approach can
easily make your session files unusable). This disables all old announce
URLs in group 0 using a <code>t.multicall</code>, and then adds a new one:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>rtcontrol<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span>--exec<span class="w"> </span><span class="s1">&#39;t.multicall=0,t.disable= ; d.tracker.insert=0,&quot;http://new.example.com/announce&quot; ; d.save_full_session=&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="s2">&quot;tracker=http://old.example.com/announce&quot;</span>
</code></pre></div>
<p>The <code>tracker.insert</code> also shows that arguments to commands can be
quoted.</p>
<h2 id="using-templates-as-filter-values">Using Templates as Filter Values</h2>
<p>As mentioned in <code>filter-conditions</code>, you
can compare a string field to a template. This can be a brain twister,
so just look at the following example, which replaces any download path
in an item by the real storage path, but only if they differ.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1"># List any differences</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>rtcontrol<span class="w"> </span><span class="nv">path</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="w"> </span><span class="nv">is_multi_file</span><span class="o">=</span>y<span class="w"> </span><span class="s1">&#39;directory!={{d.realpath|replace(&quot;[&quot;,&quot;[[]&quot;)}}&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span>-qo<span class="w"> </span>directory,realpath
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>rtcontrol<span class="w"> </span><span class="nv">path</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="w"> </span><span class="nv">is_multi_file</span><span class="o">=</span>n<span class="w"> </span><span class="s1">&#39;directory!={{d.realpath|pathdir|replace(&quot;[&quot;,&quot;[[]&quot;)}}&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span>-qo<span class="w"> </span>directory,realpath.pathdir
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="c1"># Fix any differences (i.e. resolve all symlinks for good)</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>rtcontrol<span class="w"> </span><span class="nv">path</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="w"> </span><span class="nv">is_multi_file</span><span class="o">=</span>y<span class="w"> </span><span class="s1">&#39;directory!={{d.realpath|replace(&quot;[&quot;,&quot;[[]&quot;)}}&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">    </span>--exec<span class="w"> </span><span class="s1">&#39;directory_base.set={{item.realpath}}&#39;</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>rtcontrol<span class="w"> </span><span class="nv">path</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="w"> </span><span class="nv">is_multi_file</span><span class="o">=</span>n<span class="w"> </span><span class="s1">&#39;directory!={{d.realpath|pathdir|replace(&quot;[&quot;,&quot;[[]&quot;)}}&#39;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">    </span>--exec<span class="w"> </span><span class="s1">&#39;directory.set={{item.realpath|pathdir}}&#39;</span>
</code></pre></div>
<p>As so often, 'multi' and 'single' items need a slightly different
treatment.</p>
<p>Note that <code>[</code> characters are escaped to <code>[[]</code>, so that things like
<code>[2017]</code> in a filename do not lead to unexpected results. <code>*</code> and <code>?</code>
though are kept intact and are used for glob matching as normal,
because they match their own literal form if they appear in the field
value (on the right-hand side).</p>
<h1 id="using-rtxmlrpc">Using 'rtxmlrpc'</h1>
<h2 id="load-metafile-with-a-specific-data-path">Load Metafile with a Specific Data Path</h2>
<p>The following shows how to load a metafile from any path in <code>$metafile</code>,
not only a watch directory, with the data downloaded to <code>$data_dir</code> by
adding a <code>d.directory_base.set</code> on-load command. You might need to
change that to <code>d.directory.set</code> depending on your exact use-case.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>rtxmlrpc<span class="w"> </span>-q<span class="w"> </span>load.normal<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$metafile</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span><span class="s2">&quot;d.directory_base.set=\&quot;</span><span class="nv">$data_dir</span><span class="s2">\&quot;&quot;</span><span class="w"> </span><span class="s2">&quot;d.priority.set=1&quot;</span>
</code></pre></div>
<p>Use <code>load.start</code> to start that item immediately. If the metafile has
fast-resume information and the data is already there, no extra
hashing is done.</p>
<p>And just to show you can add more on-load commands, the priority of
the new item is set to <code>low</code>. Other common on-load commands are those
that set custom values, e.g. the <em>ruTorrent</em> label.</p>
<h2 id="general-maintenance-tasks">General maintenance tasks</h2>
<p>Here are some commands that can help with managing your rTorrent
instance:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1"># Flush ALL session data NOW, use this before you make a backup of your session directory</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>rtxmlrpc<span class="w"> </span>session.save
</code></pre></div>
<h2 id="setting-and-checking-throttles">Setting and checking throttles</h2>
<p>To set the speed of the <code>slow</code> throttle, and then check your new limit
and print the current download rate, use:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="gp">$ </span>rtxmlrpc<span class="w"> </span>throttle.down<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>slow<span class="w"> </span><span class="m">120</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="go">0</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="gp">$ </span>rtxmlrpc<span class="w"> </span>throttle.down.max<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>slow
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="go">122880</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="gp">$ </span>rtxmlrpc<span class="w"> </span>throttle.down.rate<span class="w"> </span><span class="s1">&#39;&#39;</span><span class="w"> </span>slow
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="go">0</span>
</code></pre></div>
<p>Note that the speed is specified in KiB/s as a string when setting it
but returned in bytes/s as an integer on queries.</p>
<p>The following script makes this available in an easy usable form, e.g.
<code>throttle slow 42</code> -- it also shows the current rate and settings of all
defined throttles when called without arguments:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="ch">#! /bin/bash</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="c1"># Set speed of named throttle</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="c1">#</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="c1"># CONFIGURATION</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="c1">#</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="nv">throttle_name</span><span class="o">=</span><span class="s2">&quot;seed&quot;</span><span class="w"> </span><span class="c1"># default name</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="nv">unit</span><span class="o">=</span><span class="m">1024</span><span class="w"> </span><span class="c1"># KiB/s</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="c1">#</span>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="c1"># HERE BE DRAGONS!</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="c1">#</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="nv">down</span><span class="o">=</span><span class="nb">false</span>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;-d&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">    </span><span class="nv">down</span><span class="o">=</span><span class="nb">true</span>
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">    </span><span class="nb">shift</span>
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="k">fi</span>
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span>-d<span class="w"> </span><span class="m">0</span>-9<span class="k">)</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="w">    </span><span class="c1"># Non-numeric $1 is a name</span>
<a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a><span class="w">    </span><span class="nv">throttle_name</span><span class="o">=</span><span class="nv">$1</span>
<a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="w">    </span><span class="nb">shift</span>
<a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a><span class="k">fi</span>
<a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a>
<a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span>&gt;<span class="p">&amp;</span><span class="m">2</span><span class="w"> </span><span class="s2">&quot;Usage: </span><span class="si">${</span><span class="nv">0</span><span class="p">/</span><span class="nv">$HOME</span><span class="p">/~</span><span class="si">}</span><span class="s2"> [-d] [&lt;throttle-name=</span><span class="nv">$throttle_name</span><span class="s2">&gt;] &lt;rate&gt;&quot;</span>
<a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a>
<a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a><span class="w">    </span><span class="nv">rtorrent_rc</span><span class="o">=</span>~/.rtorrent.rc
<a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a><span class="w">    </span><span class="nb">test</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$rtorrent_rc</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">rtorrent_rc</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>system.get_cwd<span class="k">)</span><span class="s2">/rtorrent.rc&quot;</span>
<a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$rtorrent_rc</span><span class="s2">&quot;</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-13-31" name="__codelineno-13-31" href="#__codelineno-13-31"></a><span class="w">        </span><span class="nv">throttles</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>egrep<span class="w"> </span><span class="s1">&#39;^throttle[._](up|down)&#39;</span><span class="w"> </span><span class="nv">$rtorrent_rc</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span>._<span class="o">=</span>,<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-f3<span class="w"> </span>-d<span class="s2">&quot; &quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="k">)</span><span class="s2">&quot;</span>
<a id="__codelineno-13-32" name="__codelineno-13-32" href="#__codelineno-13-32"></a><span class="w">        </span><span class="nb">echo</span>
<a id="__codelineno-13-33" name="__codelineno-13-33" href="#__codelineno-13-33"></a><span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;CURRENT THROTTLE SETTINGS&quot;</span>
<a id="__codelineno-13-34" name="__codelineno-13-34" href="#__codelineno-13-34"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span>throttle<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$throttles</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<a id="__codelineno-13-35" name="__codelineno-13-35" href="#__codelineno-13-35"></a><span class="w">            </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;  </span><span class="nv">$throttle</span><span class="s2">\t&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-13-36" name="__codelineno-13-36" href="#__codelineno-13-36"></a><span class="w">                </span><span class="s2">&quot;U: </span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>to_kb<span class="w"> </span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>throttle.up.rate<span class="w"> </span><span class="nv">$throttle</span><span class="k">))</span><span class="s2"> /&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-13-37" name="__codelineno-13-37" href="#__codelineno-13-37"></a><span class="w">                </span><span class="s2">&quot;</span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>to_kb<span class="w"> </span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>throttle.up.max<span class="w"> </span><span class="nv">$throttle</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">&#39;s/^-1$/0/&#39;</span><span class="k">))</span><span class="s2"> KiB/s\t&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-13-38" name="__codelineno-13-38" href="#__codelineno-13-38"></a><span class="w">                </span><span class="s2">&quot;D: </span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>to_kb<span class="w"> </span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>throttle.down.rate<span class="w"> </span><span class="nv">$throttle</span><span class="k">))</span><span class="s2"> /&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-13-39" name="__codelineno-13-39" href="#__codelineno-13-39"></a><span class="w">                </span><span class="s2">&quot;</span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>to_kb<span class="w"> </span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>throttle.down.max<span class="w"> </span><span class="nv">$throttle</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">&#39;s/^-1$/0/&#39;</span><span class="k">))</span><span class="s2"> KiB/s&quot;</span>
<a id="__codelineno-13-40" name="__codelineno-13-40" href="#__codelineno-13-40"></a><span class="w">        </span><span class="k">done</span>
<a id="__codelineno-13-41" name="__codelineno-13-41" href="#__codelineno-13-41"></a><span class="w">    </span><span class="k">fi</span>
<a id="__codelineno-13-42" name="__codelineno-13-42" href="#__codelineno-13-42"></a><span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="m">2</span>
<a id="__codelineno-13-43" name="__codelineno-13-43" href="#__codelineno-13-43"></a><span class="k">fi</span>
<a id="__codelineno-13-44" name="__codelineno-13-44" href="#__codelineno-13-44"></a>
<a id="__codelineno-13-45" name="__codelineno-13-45" href="#__codelineno-13-45"></a><span class="nv">rate</span><span class="o">=</span><span class="k">$((</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">$unit</span><span class="w"> </span><span class="k">))</span>
<a id="__codelineno-13-46" name="__codelineno-13-46" href="#__codelineno-13-46"></a>
<a id="__codelineno-13-47" name="__codelineno-13-47" href="#__codelineno-13-47"></a><span class="c1"># Set chosen bandwidth</span>
<a id="__codelineno-13-48" name="__codelineno-13-48" href="#__codelineno-13-48"></a><span class="k">if</span><span class="w"> </span><span class="nv">$down</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-13-49" name="__codelineno-13-49" href="#__codelineno-13-49"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>throttle.down.max<span class="w"> </span><span class="nv">$throttle_name</span><span class="k">)</span><span class="w"> </span>-ne<span class="w"> </span><span class="nv">$rate</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-13-50" name="__codelineno-13-50" href="#__codelineno-13-50"></a><span class="w">        </span>rtxmlrpc<span class="w"> </span>-q<span class="w"> </span>throttle.down<span class="w"> </span><span class="nv">$throttle_name</span><span class="w"> </span><span class="k">$((</span><span class="w"> </span><span class="nv">$rate</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1024</span><span class="w"> </span><span class="k">))</span>
<a id="__codelineno-13-51" name="__codelineno-13-51" href="#__codelineno-13-51"></a><span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Throttle &#39;</span><span class="nv">$throttle_name</span><span class="s2">&#39; download rate changed to&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-13-52" name="__codelineno-13-52" href="#__codelineno-13-52"></a><span class="w">             </span><span class="s2">&quot;</span><span class="k">$((</span><span class="w"> </span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>throttle.down.max<span class="w"> </span><span class="nv">$throttle_name</span><span class="k">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1024</span><span class="w"> </span><span class="k">))</span><span class="s2"> KiB/s&quot;</span>
<a id="__codelineno-13-53" name="__codelineno-13-53" href="#__codelineno-13-53"></a><span class="w">    </span><span class="k">fi</span>
<a id="__codelineno-13-54" name="__codelineno-13-54" href="#__codelineno-13-54"></a><span class="k">else</span>
<a id="__codelineno-13-55" name="__codelineno-13-55" href="#__codelineno-13-55"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>throttle.up.max<span class="w"> </span><span class="nv">$throttle_name</span><span class="k">)</span><span class="w"> </span>-ne<span class="w"> </span><span class="nv">$rate</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-13-56" name="__codelineno-13-56" href="#__codelineno-13-56"></a><span class="w">        </span>rtxmlrpc<span class="w"> </span>-q<span class="w"> </span>throttle.up<span class="w"> </span><span class="nv">$throttle_name</span><span class="w"> </span><span class="k">$((</span><span class="w"> </span><span class="nv">$rate</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1024</span><span class="w"> </span><span class="k">))</span>
<a id="__codelineno-13-57" name="__codelineno-13-57" href="#__codelineno-13-57"></a><span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Throttle &#39;</span><span class="nv">$throttle_name</span><span class="s2">&#39; upload rate changed to&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-13-58" name="__codelineno-13-58" href="#__codelineno-13-58"></a><span class="w">             </span><span class="s2">&quot;</span><span class="k">$((</span><span class="w"> </span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>throttle.up.max<span class="w"> </span><span class="nv">$throttle_name</span><span class="k">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1024</span><span class="w"> </span><span class="k">))</span><span class="s2"> KiB/s&quot;</span>
<a id="__codelineno-13-59" name="__codelineno-13-59" href="#__codelineno-13-59"></a><span class="w">    </span><span class="k">fi</span>
<a id="__codelineno-13-60" name="__codelineno-13-60" href="#__codelineno-13-60"></a><span class="k">fi</span>
</code></pre></div>
<h2 id="global-throttling-when-other-computers-are-up">Global throttling when other computers are up</h2>
<p>If you want to be loved by your house-mates, try this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="ch">#! /bin/bash</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="c1"># Throttle bittorrent when certain hosts are up</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="c1">#</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="c1"># CONFIGURATION</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="c1">#</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="nv">hosts_to_check</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">mom</span><span class="p"> dad</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="nv">full_up</span><span class="o">=</span><span class="m">62</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="nv">full_down</span><span class="o">=</span><span class="m">620</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="nv">nice_up</span><span class="o">=</span><span class="m">42</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="nv">nice_down</span><span class="o">=</span><span class="m">123</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="nv">unit</span><span class="o">=</span><span class="m">1024</span><span class="w"> </span><span class="c1"># KiB/s</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="c1">#</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="c1"># HERE BE DRAGONS!</span>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="c1">#</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="c1"># Check if any prioritized hosts are up</span>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="nv">up</span><span class="o">=</span><span class="k">$((</span><span class="w"> </span><span class="nv">$full_up</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">$unit</span><span class="w"> </span><span class="k">))</span>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="nv">down</span><span class="o">=</span><span class="k">$((</span><span class="w"> </span><span class="nv">$full_down</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">$unit</span><span class="w"> </span><span class="k">))</span>
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="nv">hosts</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a>
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a><span class="k">for</span><span class="w"> </span>host<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$hosts_to_check</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span>ping<span class="w"> </span>-c1<span class="w"> </span><span class="nv">$host</span><span class="w"> </span>&gt;/dev/null<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="w">        </span><span class="nv">up</span><span class="o">=</span><span class="k">$((</span><span class="w"> </span><span class="nv">$nice_up</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">$unit</span><span class="w"> </span><span class="k">))</span>
<a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a><span class="w">        </span><span class="nv">down</span><span class="o">=</span><span class="k">$((</span><span class="w"> </span><span class="nv">$nice_down</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">$unit</span><span class="w"> </span><span class="k">))</span>
<a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a><span class="w">        </span><span class="nv">hosts</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$hosts</span><span class="s2"> </span><span class="nv">$host</span><span class="s2">&quot;</span>
<a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="w">    </span><span class="k">fi</span>
<a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a><span class="k">done</span>
<a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a>
<a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a><span class="nv">reason</span><span class="o">=</span><span class="s2">&quot;at full throttle&quot;</span>
<a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a><span class="nb">test</span><span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$hosts</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">reason</span><span class="o">=</span><span class="s2">&quot;for</span><span class="nv">$hosts</span><span class="s2">&quot;</span>
<a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a>
<a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a><span class="c1"># Set chosen bandwidth</span>
<a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>throttle.global_up.max_rate<span class="k">)</span><span class="w"> </span>-ne<span class="w"> </span><span class="nv">$up</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Setting upload rate to </span><span class="k">$((</span><span class="w"> </span><span class="nv">$up</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1024</span><span class="w"> </span><span class="k">))</span><span class="s2"> KiB/s </span><span class="nv">$reason</span><span class="s2">&quot;</span>
<a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a><span class="w">    </span>rtxmlrpc<span class="w"> </span>-q<span class="w"> </span>throttle.global_up.max_rate.set_kb<span class="w"> </span><span class="k">$((</span><span class="w"> </span><span class="nv">$up</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1024</span><span class="w"> </span><span class="k">))</span>
<a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a><span class="k">fi</span>
<a id="__codelineno-14-39" name="__codelineno-14-39" href="#__codelineno-14-39"></a><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="k">$(</span>rtxmlrpc<span class="w"> </span>throttle.global_down.max_rate<span class="k">)</span><span class="w"> </span>-ne<span class="w"> </span><span class="nv">$down</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-14-40" name="__codelineno-14-40" href="#__codelineno-14-40"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Setting download rate to </span><span class="k">$((</span><span class="w"> </span><span class="nv">$down</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1024</span><span class="w"> </span><span class="k">))</span><span class="s2"> KiB/s </span><span class="nv">$reason</span><span class="s2">&quot;</span>
<a id="__codelineno-14-41" name="__codelineno-14-41" href="#__codelineno-14-41"></a><span class="w">    </span>rtxmlrpc<span class="w"> </span>-q<span class="w"> </span>throttle.global_down.max_rate.set_kb<span class="w"> </span><span class="k">$((</span><span class="w"> </span><span class="nv">$down</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1024</span><span class="w"> </span><span class="k">))</span>
<a id="__codelineno-14-42" name="__codelineno-14-42" href="#__codelineno-14-42"></a><span class="k">fi</span>
</code></pre></div>
<p>Add it to your crontab and run it every few minutes.</p>
<h2 id="throttling-rtorrent-for-a-limited-time">Throttling rTorrent for a limited time</h2>
<p>If you want to slow down <em>rTorrent</em> to use your available bandwidth on
foreground tasks like browsing, but usually forget to return the
throttle settings back to normal, then you can use the provided
<code>rt-backseat</code> script. It will register a job via <code>at</code>, so that command
must be installed on the machine for it to work. The default throttle
speed and timeout can be set at the top of the script.
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="c1"># Throttle rTorrent for a certain amount of time</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="c1">#</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="c1"># CONFIGURATION</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="c1">#</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="n">timeout</span><span class="o">=</span><span class="s2">&quot;now + 10 minutes&quot;</span> <span class="c1"># default timeout</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="n">throttled</span><span class="o">=</span><span class="mi">42</span> <span class="c1"># throttled speed</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="n">unit</span><span class="o">=</span><span class="mi">1024</span> <span class="c1"># unit on command line, default KiB/s</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="n">queue</span><span class="o">=</span><span class="n">r</span>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="c1">#</span>
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="c1"># HERE BE DRAGONS!</span>
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="c1">#</span>
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="nb">set</span> <span class="o">-</span><span class="n">e</span>
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a><span class="nb">set</span> <span class="o">+</span><span class="n">x</span>
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a>
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a><span class="k">case</span> <span class="s2">&quot;$1&quot;</span> <span class="ow">in</span>
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>    <span class="o">-</span><span class="n">h</span> <span class="o">|</span> <span class="o">--</span><span class="n">help</span><span class="p">)</span>
<a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a>        <span class="n">echo</span> <span class="o">&gt;&amp;</span><span class="mi">2</span> <span class="s2">&quot;Usage: $0 [«speed» [«timespec»]]&quot;</span>
<a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a>        <span class="n">exit</span> <span class="mi">1</span>
<a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a>        <span class="p">;;</span>
<a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a>    <span class="o">*</span><span class="p">)</span> <span class="p">:</span> <span class="p">;;</span>
<a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a><span class="n">esac</span>
<a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a>
<a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a><span class="k">if</span> <span class="n">test</span> <span class="o">-</span><span class="n">n</span> <span class="s2">&quot;$(echo &quot;</span><span class="err">$</span><span class="mi">1</span><span class="s2">&quot; | tr -d 0-9)&quot;</span><span class="p">;</span> <span class="n">then</span>
<a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a>    <span class="n">echo</span> <span class="o">&gt;&amp;</span><span class="mi">2</span> <span class="s2">&quot;ERROR: Non-numeric speed&quot;</span>
<a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a>    <span class="n">exit</span> <span class="mi">1</span>
<a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a><span class="n">fi</span>
<a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a>
<a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a><span class="k">if</span> <span class="n">test</span> <span class="o">-</span><span class="n">n</span> <span class="s2">&quot;$1&quot;</span><span class="p">;</span> <span class="n">then</span>
<a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a>    <span class="n">throttled</span><span class="o">=</span><span class="s2">&quot;$1&quot;</span>
<a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a>    <span class="n">shift</span>
<a id="__codelineno-15-34" name="__codelineno-15-34" href="#__codelineno-15-34"></a><span class="n">fi</span>
<a id="__codelineno-15-35" name="__codelineno-15-35" href="#__codelineno-15-35"></a><span class="n">throttled</span><span class="o">=</span><span class="err">$</span><span class="p">((</span> <span class="n">throttled</span> <span class="o">*</span> <span class="n">unit</span> <span class="p">))</span>
<a id="__codelineno-15-36" name="__codelineno-15-36" href="#__codelineno-15-36"></a>
<a id="__codelineno-15-37" name="__codelineno-15-37" href="#__codelineno-15-37"></a><span class="k">if</span> <span class="n">test</span> <span class="o">-</span><span class="n">n</span> <span class="s2">&quot;$1&quot;</span><span class="p">;</span> <span class="n">then</span>
<a id="__codelineno-15-38" name="__codelineno-15-38" href="#__codelineno-15-38"></a>    <span class="n">timeout</span><span class="o">=</span><span class="s2">&quot;$*&quot;</span>
<a id="__codelineno-15-39" name="__codelineno-15-39" href="#__codelineno-15-39"></a><span class="n">fi</span>
<a id="__codelineno-15-40" name="__codelineno-15-40" href="#__codelineno-15-40"></a>
<a id="__codelineno-15-41" name="__codelineno-15-41" href="#__codelineno-15-41"></a><span class="k">if</span> <span class="n">test</span> <span class="o">-</span><span class="n">n</span> <span class="s2">&quot;$(atq -q $queue)&quot;</span><span class="p">;</span> <span class="n">then</span>
<a id="__codelineno-15-42" name="__codelineno-15-42" href="#__codelineno-15-42"></a>    <span class="c1"># If there are jobs pending, run 1st one now, and then delete them</span>
<a id="__codelineno-15-43" name="__codelineno-15-43" href="#__codelineno-15-43"></a>    <span class="n">at</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;$(atq -q $queue | cut -f1 | head -n1)&quot;</span> <span class="o">|</span> <span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">sh</span>
<a id="__codelineno-15-44" name="__codelineno-15-44" href="#__codelineno-15-44"></a>    <span class="n">atrm</span> <span class="s2">&quot;$(atq -q $queue | cut -f1)&quot;</span>
<a id="__codelineno-15-45" name="__codelineno-15-45" href="#__codelineno-15-45"></a><span class="n">fi</span>
<a id="__codelineno-15-46" name="__codelineno-15-46" href="#__codelineno-15-46"></a>
<a id="__codelineno-15-47" name="__codelineno-15-47" href="#__codelineno-15-47"></a><span class="n">current</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="n">rtxmlrpc</span> <span class="n">throttle</span><span class="o">.</span><span class="n">global_down</span><span class="o">.</span><span class="n">max_rate</span><span class="p">)</span>
<a id="__codelineno-15-48" name="__codelineno-15-48" href="#__codelineno-15-48"></a>
<a id="__codelineno-15-49" name="__codelineno-15-49" href="#__codelineno-15-49"></a><span class="c1"># Schedule new job to reset rate, and then throttle it</span>
<a id="__codelineno-15-50" name="__codelineno-15-50" href="#__codelineno-15-50"></a><span class="n">result</span><span class="o">=</span><span class="err">$</span><span class="p">(</span><span class="n">at</span> <span class="o">-</span><span class="n">q</span> <span class="err">$</span><span class="n">queue</span> <span class="s2">&quot;$timeout&quot;</span> <span class="o">&lt;&lt;</span><span class="n">EOF</span> <span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>
<a id="__codelineno-15-51" name="__codelineno-15-51" href="#__codelineno-15-51"></a><span class="n">rtxmlrpc</span> <span class="o">-</span><span class="n">q</span> <span class="n">throttle</span><span class="o">.</span><span class="n">global_down</span><span class="o">.</span><span class="n">max_rate</span><span class="o">.</span><span class="n">set</span> <span class="s1">&#39;&#39;</span> <span class="err">$</span><span class="n">current</span>
<a id="__codelineno-15-52" name="__codelineno-15-52" href="#__codelineno-15-52"></a><span class="n">EOF</span>
<a id="__codelineno-15-53" name="__codelineno-15-53" href="#__codelineno-15-53"></a><span class="p">)</span> <span class="o">||</span> <span class="p">:</span>
<a id="__codelineno-15-54" name="__codelineno-15-54" href="#__codelineno-15-54"></a><span class="k">if</span> <span class="p">[[</span> <span class="err">$</span><span class="n">result</span> <span class="o">=~</span> <span class="o">.*</span><span class="p">(</span><span class="n">error</span><span class="o">|</span><span class="n">arbled</span><span class="p">)</span><span class="o">.*</span> <span class="p">]];</span> <span class="n">then</span>
<a id="__codelineno-15-55" name="__codelineno-15-55" href="#__codelineno-15-55"></a>    <span class="n">echo</span> <span class="o">&gt;&amp;</span><span class="mi">2</span> <span class="s2">&quot;ERROR: $result&quot;</span>
<a id="__codelineno-15-56" name="__codelineno-15-56" href="#__codelineno-15-56"></a>    <span class="n">exit</span> <span class="mi">1</span>
<a id="__codelineno-15-57" name="__codelineno-15-57" href="#__codelineno-15-57"></a><span class="n">fi</span>
<a id="__codelineno-15-58" name="__codelineno-15-58" href="#__codelineno-15-58"></a><span class="n">echo</span> <span class="s2">&quot;$result&quot;</span> <span class="o">|</span> <span class="n">sed</span> <span class="o">-</span><span class="n">re</span> <span class="s2">&quot;s~warning: commands will be executed using /bin/sh~~&quot;</span>
<a id="__codelineno-15-59" name="__codelineno-15-59" href="#__codelineno-15-59"></a><span class="n">rtxmlrpc</span> <span class="o">-</span><span class="n">q</span> <span class="n">throttle</span><span class="o">.</span><span class="n">global_down</span><span class="o">.</span><span class="n">max_rate</span><span class="o">.</span><span class="n">set</span> <span class="s1">&#39;&#39;</span> <span class="err">$</span><span class="n">throttled</span>
<a id="__codelineno-15-60" name="__codelineno-15-60" href="#__codelineno-15-60"></a>
<a id="__codelineno-15-61" name="__codelineno-15-61" href="#__codelineno-15-61"></a><span class="n">echo</span> <span class="s2">&quot;Speed throttled to $(( throttled / 1024 )) KiB/s,&quot;</span> \
<a id="__codelineno-15-62" name="__codelineno-15-62" href="#__codelineno-15-62"></a>     <span class="s2">&quot;back to $(( current / 1024 )) KiB/s at $timeout.&quot;</span>
</code></pre></div></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tabs", "toc.integrate"], "search": "../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
    
  </body>
</html>